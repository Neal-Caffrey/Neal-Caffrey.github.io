{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap 6978738ca3a64a5c6af3","webpack:///./src/index.js"],"names":["isArray","object","Array","constructor","_uuid","Date","getTime","ComImg","option","name","version","data","uuid","init","url","Error","param","_getTrueUrl","urlObj","document","createElement","href","key","window","location","_string2Url","pathname","pathArray","match","length","domain","path","query","_getTrueParam","indexOf","res","_anotherRule","hostname","dd","env","host","test","par","module","exports"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,O;ACVA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA,mDAA2C,cAAc;;AAEzD;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAK;AACL;AACA;;AAEA;AACA;AACA;AACA,mCAA2B,0BAA0B,EAAE;AACvD,yCAAiC,eAAe;AAChD;AACA;AACA;;AAEA;AACA,8DAAsD,+DAA+D;;AAErH;AACA;;AAEA;AACA;;;;;;;;;;;;;;;;AChEA;;;;;;;;;AASA,SAASA,OAAT,CAAiBC,MAAjB,EAAwB;AACpB,SAAOA,UAAU,QAAOA,MAAP,yCAAOA,MAAP,OAAgB,QAA1B,IACCC,SAASD,OAAOE,WADxB;AAEH;AACD,IAAMC,QAAQ,SAARA,KAAQ;AAAA,SAAM,cAAe,IAAIC,IAAJ,EAAD,CAAaC,OAAb,EAApB;AAAA,CAAd;;IACMC,M;AACJ,kBAAYC,MAAZ,EAAoB;AAAA;;AAClB,SAAKC,IAAL,GAAY,QAAZ;AACA,SAAKC,OAAL,GAAe,QAAf;AACA,SAAKF,MAAL,GAAcA,MAAd;AACA,SAAKG,IAAL,GAAY;AACVF,YAAM,KAAKA,IADD;AAEVG,YAAMR;AAFI,KAAZ;AAIA,SAAKS,IAAL;AACD;;;;2BACM;AACL,UAAG,CAAC,KAAKL,MAAL,CAAYM,GAAhB,EAAoB;AAClB,cAAM,IAAIC,KAAJ,CAAU,QAAV,CAAN;AACA;AACD;AACD,UAAG,CAAC,KAAKP,MAAL,CAAYQ,KAAhB,EAAsB;AACpB,cAAM,IAAID,KAAJ,CAAU,UAAV,CAAN;AACA;AACD;AACF;;;6BACO;AACN,aAAO,KAAKE,WAAL,EAAP;AACD;;;kCACa;AACZ;;;;AAIA,UAAG,CAAC,KAAKT,MAAL,CAAYM,GAAhB,EAAoB;AAClB,cAAM,IAAIC,KAAJ,CAAU,MAAV,CAAN;AACA;AACD;AACD,UAAIG,SAAS,EAAb;AACA,UAAIJ,MAAMK,SAASC,aAAT,CAAuB,GAAvB,CAAV;AACAN,UAAIO,IAAJ,GAAW,KAAKb,MAAL,CAAYM,GAAvB;AACA,WAAI,IAAIQ,GAAR,IAAeC,OAAOC,QAAtB,EAA+B;AAC7BN,eAAOI,GAAP,IAAcR,IAAIQ,GAAJ,CAAd;AACD;AACD,aAAOJ,MAAP;AACD;;;kCACa;AACZ;;;;AAIA,UAAIJ,MAAM,KAAKW,WAAL,EAAV;AACA,UAAG,CAACX,IAAIY,QAAR,EAAiB;AACf,cAAM,IAAIX,KAAJ,CAAU,MAAV,CAAN;AACA;AACD;AACD,UAAIY,YAAYb,IAAIY,QAAJ,CAAaE,KAAb,CAAmB,uCAAnB,CAAhB;AACA,UAAG5B,QAAQ2B,SAAR,KAAsBA,UAAUE,MAAV,IAAoB,CAA7C,EAA+C;AAC7C,YAAIC,SAASH,UAAU,CAAV,CAAb;AACA,YAAII,OAAOJ,UAAU,CAAV,CAAX;AACA,YAAIK,QAAQ,KAAKC,aAAL,CAAmBN,UAAU,CAAV,CAAnB,CAAZ;AACA,YAAGG,OAAOI,OAAP,CAAe,KAAf,IAAsB,CAAC,CAA1B,EAA4B;AACxB,8BAAkBJ,MAAlB,yBAA4CC,IAA5C,GAAmDC,KAAnD;AACH,SAFD,MAEK;AACH;AACA,cAAIG,MAAM,KAAKC,YAAL,CAAkBtB,IAAIuB,QAAtB,CAAV;AACA,8BAAkBF,GAAlB,yBAAyCL,MAAzC,SAAmDC,IAAnD,GAA0DC,KAA1D;AACD;AACF,OAXD,MAWK;AACH;;;;AAIA,eAAOlB,IAAIO,IAAX;AACD;AACF;;;iCACYiB,E,EAAG;AACd;;;;AAIA,UAAIR,SAAS,EAAb;AACA,UAAIS,MAAO,UAACC,IAAD,EAAQ;AACjB,YAAG,YAAYC,IAAZ,CAAiBD,IAAjB,CAAH,EAA0B;AACxB,iBAAO,KAAP;AACD;AACD,YAAG,aAAaC,IAAb,CAAkBD,IAAlB,CAAH,EAA2B;AACzB,iBAAO,MAAP;AACD;AACD,YAAG,UAAUC,IAAV,CAAeD,IAAf,CAAH,EAAwB;AACtB,iBAAO,KAAP;AACD;AACF,OAVS,CAUPF,EAVO,CAAV;AAWA,cAAOC,GAAP;AACE,aAAK,KAAL;AACET,mBAAS,WAAT;AACA;AACF,aAAK,MAAL;AACEA,mBAAS,SAAT;AACA;AACF,aAAK,KAAL;AACEA,mBAAS,WAAT;AACA;AACF;AACEA,mBAAS,WAAT;AAXJ;;AAcA,aAAOA,MAAP;AACD;;;kCACaY,G,EAAK;AACjB;;;;;AAKA,UAAG,KAAKlC,MAAL,CAAYQ,KAAf,EAAqB;AACnB,qBAAW,KAAKR,MAAL,CAAYQ,KAAvB;AACD,OAFD,MAEK;AACH,eAAO0B,YAAUA,GAAV,GAAkB,EAAzB;AACD;AAEF;;;;;;AAGHC,OAAOC,OAAP,GAAiBrC,MAAjB,C","file":"main.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse {\n\t\tvar a = factory();\n\t\tfor(var i in a) (typeof exports === 'object' ? exports : root)[i] = a[i];\n\t}\n})(this, function() {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// identity function for calling harmony imports with the correct context\n \t__webpack_require__.i = function(value) { return value; };\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 6978738ca3a64a5c6af3","/*\n* ComImg - $1.0.5\n* 功能：***\n* 说明：***\n* 参数： {\n**  url ： required\n*   param : required\n* }\n*/\nfunction isArray(object){\n    return object && typeof object==='object' &&\n            Array == object.constructor;\n}\nconst _uuid = () => 'WG_ComImg' + (new Date()).getTime();\nclass ComImg {\n  constructor(option) {\n    this.name = 'ComImg';\n    this.version = '$1.0.5';\n    this.option = option;\n    this.data = {\n      name: this.name,\n      uuid: _uuid()\n    };\n    this.init();\n  }\n  init() {\n    if(!this.option.url){\n      throw new Error('url 必传');\n      return;\n    }\n    if(!this.option.param){\n      throw new Error('param 必传');\n      return;\n    }\n  }\n  getUrl(){\n    return this._getTrueUrl();\n  }\n  _string2Url() {\n    /**\n     * 把String转换成URL\n     * @url [Url]\n     */\n    if(!this.option.url){\n      throw new Error('Shit');\n      return;\n    }\n    let urlObj = {};\n    let url = document.createElement('a');\n    url.href = this.option.url;\n    for(let key in window.location){\n      urlObj[key] = url[key];\n    }\n    return urlObj;\n  }\n  _getTrueUrl() {\n    /**\n     * 获取转换后的url\n     *\n     */\n    let url = this._string2Url();\n    if(!url.pathname){\n      throw new Error('Shit');\n      return;\n    }\n    let pathArray = url.pathname.match(/\\/[\\/]?([^\\/]*)\\/([^!|?]*)[!]?([\\S]*)/);\n    if(isArray(pathArray) && pathArray.length >= 2){\n      let domain = pathArray[1];\n      let path = pathArray[2];\n      let query = this._getTrueParam(pathArray[3]);\n      if(domain.indexOf('fr-')>-1){\n          return `https://${domain}.huangbaoche.com/${path}${query}`;\n      }else{\n        // 另外一种规则..\n        let res = this._anotherRule(url.hostname);\n        return `https://${res}.huangbaoche.com/${domain}/${path}${query}`;\n      }\n    }else{\n      /**\n       * 如查Array 的length 小于1 那么直接return 之前的url\n       * @type {[type]}\n       */\n      return url.href;\n    }\n  }\n  _anotherRule(dd){\n    /**\n     * [domain 返回值]\n     * @dd {String} : domain\n     */\n    let domain = '';\n    let env = ((host)=>{\n      if(/hbcdn-dev/.test(host)){\n        return 'dev'\n      }\n      if(/hbcdn-test/.test(host)){\n        return 'test'\n      }\n      if(/hbcdn\\./.test(host)){\n        return 'pub'\n      }\n    })(dd)\n    switch(env){\n      case 'dev' :\n        domain = 'fr-hd-dev';\n        break;\n      case 'test' :\n        domain = 'fr-hb-t';\n        break;\n      case 'pub' :\n        domain = 'fr-static';\n        break;\n      default :\n        domain = 'fr-static';\n    }\n\n    return domain;\n  }\n  _getTrueParam(par) {\n    /**\n     * 获取转换后的param\n     * par 这个是从URL中分析出来的，只可能是m,l,...\n     * 传入的param优先级最高，传入的param会覆盖par\n     */\n    if(this.option.param){\n      return `?${this.option.param}`;\n    }else{\n      return par ? `!${par}` : '';\n    }\n\n  }\n}\n\nmodule.exports = ComImg\n\n\n\n// WEBPACK FOOTER //\n// ./src/index.js"],"sourceRoot":""}